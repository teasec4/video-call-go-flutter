# Video Call App - План развития

## Статус проекта

**Последнее обновление**: 22.01.2026  
**Стадия**: MVP (Minimum Viable Product)

## Выполнено (22.01.2026)

- [x] Базовая архитектура проекта
- [x] Сигнальный сервер на Go
- [x] Frontend на Flutter (web, mobile)
- [x] WebRTC видео звонки peer-to-peer
- [x] Текстовый чат
- [x] Автоматическое обнаружение пиров
- [x] Буферизация ICE candidates
- [x] Toggle микрофона во время звонка

## План на 23.01.2026

### Неотложно (High Priority)
- [ ] **Структурирование кода** (frontend)
  - Разделить main.dart на несколько файлов
  - Создать отдельные классы для WebRTC логики
  - Создать отдельный сервис для WebSocket
  - Файловая структура:
    ```
    lib/
    ├── main.dart
    ├── screens/
    │   └── home_screen.dart
    ├── services/
    │   ├── signaling_service.dart
    │   └── webrtc_service.dart
    ├── widgets/
    │   ├── video_area.dart
    │   └── chat_area.dart
    └── models/
        └── message.dart
    ```

- [ ] **UI/UX улучшения**
  - Переработать layout видео-видео просмотра
  - Улучшить визуальное отображение состояния звонка
  - Добавить индикаторы качества соединения
  - Улучшить стилизацию кнопок и элементов управления

- [ ] **Поддержка комнат**
  - Добавить создание/присоединение к комнатам
  - Модификация бэкенда для поддержки rooms
  - Обновить frontend для выбора комнаты
  - Структура сообщений:
    ```json
    {
      "type": "join-room",
      "room": "room-id"
    }
    ```

### Среднее приоритет (Medium Priority)
- [ ] Toggle камеры во время звонка
- [ ] Улучшенная обработка ошибок
- [ ] Валидация WebSocket сообщений на бэкенде
- [ ] Логирование и мониторинг

### Низкое приоритет (Low Priority)
- [ ] Экранный шеринг
- [ ] Запись звонков
- [ ] История чатов
- [ ] Профили пользователей

## Временная шкала

### Фаза 1: Стабилизация (23-24.01.2026)
**Цель**: Чистый, поддерживаемый код и интуитивный интерфейс
- Рефакторинг структуры кода
- Улучшение UI/UX
- Тестирование и фиксинг багов

### Фаза 2: Расширяемость (25-27.01.2026)
**Цель**: Поддержка групповых звонков через комнаты
- Реализация системы комнат на бэкенде
- Интеграция в frontend
- Тестирование мультипользовательских сценариев

### Фаза 3: Полировка (28.01+)
**Цель**: Production-ready приложение
- Доп. функции (toggle камеры, запись)
- Оптимизация производительности
- Развертывание

## Известные проблемы

| Проблема | Приоритет | Статус |
|----------|-----------|--------|
| Большой monolithic файл main.dart | High | TODO |
| Базовый UI без стилизации | Medium | TODO |
| Без поддержки групповых звонков | High | TODO |
| Нет обработки сетевых ошибок | Medium | TODO |

## Метрики успеха

- [ ] Код разделен на модули (макс 200 строк на файл)
- [ ] Работа в группе из 3+ участников в одной комнате
- [ ] Время отклика сигнализации < 100ms
- [ ] UI работает без лагов на всех платформах
- [ ] 100% обработка edge cases (потеря соединения, переподключение и т.д.)

## Контакты и заметки

**Репозиторий**: https://github.com/teasec4/video-call-go-flutter  
**Deploy**: 
- Backend: 0.0.0.0:8081 
- Frontend (web): http://localhost/
